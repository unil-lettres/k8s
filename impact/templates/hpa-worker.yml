#apiVersion: autoscaling/v2
#kind: HorizontalPodAutoscaler
#metadata:
#  name: {{ .Values.worker_name }}-hpa
#  namespace: {{ .Values.namespace }}
#spec:
#  scaleTargetRef:
#    apiVersion: apps/v1
#    kind: Deployment
#    name: {{ .Values.worker_name }}
#  minReplicas: {{ .Values.worker_min_replicas }}
#  maxReplicas: {{ .Values.worker_max_replicas }}
#  metrics:
#    - type: Resource
#      resource:
#        name: cpu
#        target:
#          type: Utilization
#          averageUtilization: {{ .Values.hpa_average_utilization }}
#  behavior:
#    scaleUp:
#      stabilizationWindowSeconds: {{ .Values.hpa_scaleup_stabilization }}
#    scaleDown:
#      stabilizationWindowSeconds: {{ .Values.hpa_scaledown_stabilization }}
